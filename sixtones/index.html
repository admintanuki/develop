<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="https://fan-chart.com/sixtones/">
  <title>SixTONES CDå£²ä¸Šæšæ•°æ¨ç§»ã‚°ãƒ©ãƒ•ã¾ã¨ã‚ã€2026æœ€æ–°ã€‘</title>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1"></script>
  
  <style>
    :root {
      --bg: #f8fafc; --card: #ffffff; --text: #334155; --sub: #94a3b8;
      --border: #e2e8f0; --accent-sm: #545454; /* SixTONESãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ */
      --primary-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
      --accent-upcoming: #ea580c;
      --history-body: #475569; /* è»Œè·¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”¨ã‚«ãƒ©ãƒ¼ */
    }
    body { 
      margin: 0; padding: 0; 
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Segoe UI", sans-serif; 
      background: var(--bg); color: var(--text); padding-bottom: 60px; line-height: 1.6; 
      scroll-behavior: smooth;
    }

    /* --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒãƒ¼ --- */
    .utility-bar { 
      background: #fff; 
      border-bottom: 1px solid var(--border); 
      padding: 10px 15px; 
      display: flex; 
      justify-content: center;
    }
    .utility-inner {
      width: 100%;
      max-width: 1000px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    }
    .breadcrumb { display: flex; gap: 6px; align-items: center; color: var(--sub); font-weight: 600; }
    .breadcrumb a { color: var(--accent-sm); text-decoration: none; }
    .breadcrumb span { opacity: 0.5; font-size: 10px; }

    .utility-right { display: flex; gap: 15px; }
    .utility-link { text-decoration: none; color: #64748b; font-weight: 600; display: flex; align-items: center; gap: 4px; position: relative; cursor: pointer; }
    
    .dropdown { position: relative; display: inline-block; }
    .dropdown::before { content: ""; position: absolute; top: 100%; right: 0; width: 100%; height: 10px; display: block; z-index: 100; }
    
    .dropdown-content {
      display: none; position: absolute; right: 0; background-color: #fff; min-width: 140px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1); z-index: 101; border: 1px solid var(--border);
      border-radius: 8px; margin-top: 8px;
    }
    @media (min-width: 1025px) { .dropdown:hover .dropdown-content { display: block; } }
    .dropdown-content.is-active { display: block; }
    .dropdown-content a { color: var(--text); padding: 10px 16px; text-decoration: none; display: block; font-size: 12px; border-bottom: 1px solid var(--border); }
    .dropdown-content a:last-child { border-bottom: none; }
    .dropdown-content a:hover { background-color: #f1f5f9; }

    /* --- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆFan Chart ãƒ­ã‚´ã‚¹ã‚¿ã‚¤ãƒ«çµ±åˆï¼‰ --- */
    .sticky-header { 
      background: #fff; 
      border-bottom: 3px solid var(--accent-sm); 
      padding: 20px 10px; 
    }
    .header-content { max-width: 1100px; margin: 0 auto; }
    .site-title { text-align: center; }
    .site-title h1 { margin: 0; padding: 0; }
    
    .site-title .sub-name { 
      display: block; 
      font-size: 16px; 
      color: var(--accent-sm); 
      font-weight: 800; 
      margin-bottom: 2px; 
      letter-spacing: 0.02em; 
    }
    .site-title .main-logo { 
      display: block; 
      font-family: "Georgia", serif; 
      font-size: 32px; 
      font-weight: 900; 
      font-style: italic; 
      color: #333; 
      line-height: 1.1; 
      margin: 2px 0 4px 0; 
    }
    .site-title .main-name { 
      display: block; 
      font-size: 11px; 
      font-weight: 700; 
      color: #64748b; 
      line-height: 1.2; 
    }

    @media (min-width: 768px) {
      .site-title .sub-name { font-size: 20px; } 
      .site-title .main-logo { font-size: 48px; }
      .site-title .main-name { font-size: 15px; }
    }

    /* --- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ --- */
    .container { width: 100%; max-width: 1100px; margin: 20px auto; padding: 0 15px; box-sizing: border-box; }
    .card { background: var(--card); border-radius: 16px; padding: 20px; box-shadow: var(--primary-shadow); margin-bottom: 24px; border: 1px solid var(--border); overflow: hidden; }
    
    .controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 8px; }
    
    .checkbox-control { 
      grid-column: span 3; 
      display: flex; 
      align-items: center; 
      justify-content: flex-end; 
      gap: 5px; 
      font-size: 12px; 
      color: #64748b; 
      cursor: pointer; 
      font-weight: 400; 
    }
    .checkbox-control input { width: 14px; height: 14px; cursor: pointer; margin: 0; }

    .chart-wrapper { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 8px; margin-top: 5px; scroll-behavior: smooth; }
    .chart-body { position: relative; height: 420px; min-width: 100%; }
    
    select { padding: 10px; border-radius: 10px; border: 1px solid var(--border); font-weight: 700; background: #fff; cursor: pointer; color: var(--text); font-size: 12px; }

    .section-title { font-weight: 800; color: var(--accent-sm); display: flex; align-items: center; gap: 8px; margin-bottom: 12px; font-size: 1.1rem; }
    
    /* --- è»Œè·¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ --- */
    .history-item { position: relative; padding-left: 28px; padding-bottom: 18px; border-left: 2px solid var(--border); margin-left: 6px; }
    .history-item:last-child { border-left: 2px solid transparent; padding-bottom: 0; }
    .history-item::before { 
      content: ""; position: absolute; left: -7px; top: 7px; 
      width: 12px; height: 12px; border-radius: 50%; background: var(--accent-sm); border: 2px solid #fff; 
      box-shadow: 0 0 0 1px var(--bg);
    }
    .history-year { font-weight: 800; font-size: 14px; color: var(--history-body); margin-bottom: 2px; line-height: 1.4; }
    .history-desc { font-size: 13px; color: var(--history-body); line-height: 1.5; margin: 0; }

    .list-header { font-size: 1.1rem; font-weight: 800; color: var(--accent-sm); margin: 25px 0 15px 5px; }
    .cd-list { display: grid; gap: 12px; }
    
    .cd-container { 
      background: #fff; border: 1px solid var(--border); border-radius: 14px; 
      overflow: hidden; box-shadow: var(--primary-shadow); transition: all 0.2s ease;
    }
    .cd-container:hover { transform: translateY(-3px); box-shadow: 0 10px 20px -5px rgba(0,0,0,0.1); border-color: var(--accent-sm); }
    .cd-container.upcoming { border: 1px solid #fed7aa; background-color: #fffaf5; }

    .cd-item-link { text-decoration: none !important; color: inherit !important; display: block; }
    .cd-item-base { 
      display: grid; grid-template-columns: 80px 1fr auto; gap: 12px; padding: 12px; 
      align-items: center; 
    }
    .cd-thumb { width: 80px; height: 80px; background: #f1f5f9; border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center; }
    .cd-thumb img { max-width: 100%; height: auto; display: block; }
    .cd-title { font-weight: 800; font-size: 13.5px; color: var(--accent-sm); line-height: 1.4; margin-bottom: 4px; }
    
    .sales-val { 
      font-weight: 800; 
      font-size: 14px; 
      color: var(--accent-sm); 
      text-align: right; 
      display: flex; 
      flex-direction: column; 
      align-items: flex-end; 
      gap: 4px; 
    }
    .badge-million { background: #f59e0b; color: #fff; font-size: 9px; padding: 2px 5px; border-radius: 4px; font-weight: bold; margin-top: 3px; display: inline-block; }
    
    .countdown { 
      font-size: 10px; 
      font-weight: 700; 
      color: var(--accent-upcoming); 
      background: #fff7ed; 
      padding: 1px 8px; 
      border-radius: 99px; 
      border: 1px solid #ffedd5; 
      white-space: nowrap;
    }

    .admin-comment { 
      padding: 10px 15px 12px 15px; 
      background: #f9fafb;
      font-size: 11.5px; 
      color: #64748b; 
      line-height: 1.6;
    }

    #pageTopBtn { position: fixed; bottom: 20px; right: 20px; width: 45px; height: 45px; background: var(--accent-sm); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 11px; font-weight: bold; opacity: 0; visibility: hidden; transition: 0.3s; z-index: 1000; flex-direction: column; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
    #pageTopBtn.show { opacity: 1; visibility: visible; }
    
    .spinner { width: 28px; height: 28px; border: 3px solid var(--border); border-top: 3px solid var(--accent-sm); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 40px auto; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    @media (max-width: 768px) {
      .card { padding: 12px; }
      .cd-item-base { grid-template-columns: 70px 1fr auto; gap: 10px; }
      .cd-thumb { width: 70px; height: 70px; }
      .cd-title { font-size: 13px; }
    }
  </style>
</head>
<body>

<div id="top"></div>

<div class="utility-bar">
  <div class="utility-inner">
    <nav class="breadcrumb">
      <a href="https://fan-chart.com/">TOP</a> <span>/</span> SixTONES
    </nav>

    <div class="utility-right">
      <div class="dropdown" id="groupDropdown">
        <span class="utility-link">ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ â–¾</span>
        <div class="dropdown-content">
          <a href="https://fan-chart.com/snowman/">Snow Man</a>
          <a href="https://fan-chart.com/sixtones/">SixTONES</a>
          <a href="https://fan-chart.com/king-and-prince/">King & Prince</a>
          <a href="https://fan-chart.com/naniwa-danshi/">ãªã«ã‚ç”·å­</a>
        </div>
      </div>
    </div>
  </div>
</div>

<header class="sticky-header">
  <div class="header-content">
    <div class="site-title">
      <h1>
        <span class="sub-name">SixTONES æ­´ä»£å£²ä¸Šæ¨ç§»ãƒãƒ£ãƒ¼ãƒˆ</span>
        <span class="main-logo">Fan Chart</span>
        <span class="main-name">ã€2026å¹´æœ€æ–°ã€‘æ­´ä»£ã‚·ãƒ³ã‚°ãƒ«ãƒ»ã‚¢ãƒ«ãƒãƒ å£²ä¸Šæšæ•°æ¯”è¼ƒã‚µã‚¤ãƒˆ</span>
      </h1>
    </div>
  </div>
</header>

<div class="container">
  <div id="loading"><div class="spinner"></div></div>
  <div id="mainContent" style="display:none;">
    
    <article class="card">
      <div class="controls">
        <select id="salesType"><option value="firstWeek" selected>åˆé€±å£²ä¸Š</option><option value="firstDay">åˆæ—¥å£²ä¸Š</option></select>
        <select id="filter"><option value="all">å…¨ä½œå“</option><option value="single">ã‚·ãƒ³ã‚°ãƒ«</option><option value="album">ã‚¢ãƒ«ãƒãƒ </option></select>
        <select id="sortOrder"><option value="date" selected>ç™ºå£²æ—¥é †</option><option value="salesDesc">å£²ä¸Šé †</option></select>
        
        <label class="checkbox-control">
          <input type="checkbox" id="showEvents" checked> ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¡¨ç¤º
        </label>
      </div>
      <div class="chart-wrapper" id="chartWrapper">
        <div class="chart-body" id="chartBody">
          <canvas id="salesChart"></canvas>
        </div>
      </div>
    </article>

    <section class="card">
      <h2 class="section-title">SixTONES å£²ä¸Šã®è»Œè·¡ã¨æ­©ã¿</h2>
      <div class="history-item">
        <h3 class="history-year">2012å¹´ã€œ2015å¹´ï¼šãƒ‰ãƒ©ãƒã€ãƒã‚«ãƒ¬ã‚¢ã€ã‹ã‚‰çµæˆã¸</h3>
        <p class="history-desc">ãƒ‰ãƒ©ãƒã€ç§ç«‹ãƒã‚«ãƒ¬ã‚¢é«˜æ ¡ã€å‡ºæ¼”ã®6äººãŒã€2015å¹´5æœˆ1æ—¥ã€ã‚¸ãƒ£ãƒ‹ãƒ¼ã‚ºéŠ€åº§2015ã€ã«ã¦ã‚°ãƒ«ãƒ¼ãƒ—çµæˆã‚’ç™ºè¡¨ã€‚è‡ªåˆ†ãŸã¡ã§ã€Œã“ã®6äººã§ã‚„ã‚ŠãŸã„ã€ã¨ç›´è«‡åˆ¤ã—ã‚¹ã‚¿ãƒ¼ãƒˆ</p>
      </div>
      <div class="history-item">
        <h3 class="history-year">2020å¹´ï¼šCDãƒ‡ãƒ“ãƒ¥ãƒ¼</h3>
        <p class="history-desc">1æœˆ22æ—¥ã€YOSHIKIãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚¹ã€Imitation Rainã€ã§CDãƒ‡ãƒ“ãƒ¥ãƒ¼ã€‚Snow Manã¨ã®åŒæ™‚ãƒ‡ãƒ“ãƒ¥ãƒ¼ã‚‚è©±é¡Œã¨ãªã‚Šã€åˆé€±132.8ä¸‡æšï¼ˆåˆç®—ï¼‰ã‚’è¨˜éŒ²</p>
      </div>
      <div class="history-item">
        <h3 class="history-year">2021å¹´ã€œ2022å¹´ï¼šç‹¬è‡ªã®éŸ³æ¥½æ€§ã®ç¢ºç«‹</h3>
        <p class="history-desc">1stã‚¢ãƒ«ãƒãƒ ã€1STã€ãŒå„ãƒãƒ£ãƒ¼ãƒˆã§é«˜ã„è©•ä¾¡ã‚’å—ã‘ã€é«˜ã„æ­Œå”±åŠ›ã‚’æ­¦å™¨ã«éŸ³æ¥½ãƒ•ã‚¡ãƒ³ã®æ”¯æŒã‚’æ‹¡å¤§</p>
      </div>
      <div class="history-item">
        <h3 class="history-year">2023å¹´ï¼šåˆã®å˜ç‹¬ãƒ‰ãƒ¼ãƒ å…¬æ¼”</h3>
        <p class="history-desc">åˆã®ãƒ‰ãƒ¼ãƒ å…¬æ¼”ã€æ…£å£°ã®æ³•å‰‡ in DOMEã€ã‚’æ±äº¬ãƒ‰ãƒ¼ãƒ ãƒ»äº¬ã‚»ãƒ©ãƒ‰ãƒ¼ãƒ ã§é–‹å‚¬ã€‚ãƒ‡ãƒ“ãƒ¥ãƒ¼å‰ã‹ã‚‰ã®å¿µé¡˜ã ã£ãŸã‚¹ãƒ†ãƒ¼ã‚¸ã«ç«‹ã¤</p>
      </div>
      <div class="history-item">
        <h3 class="history-year">2024å¹´ï¼š4å¤§ãƒ‰ãƒ¼ãƒ ãƒ„ã‚¢ãƒ¼é–‹å‚¬</h3>
        <p class="history-desc">4å¤§ãƒ‰ãƒ¼ãƒ ãƒ„ã‚¢ãƒ¼ã€VVSã€ã‚’é–‹å‚¬ã€‚ã¾ãŸã€MTV Unpluggedã€ã®ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ã«ã¦é«˜ã„æ­Œå”±åŠ›ã¨å®ŸåŠ›ã‚’è¨¼æ˜</p>
      </div>
      <div class="history-item">
        <h3 class="history-year">2025å¹´ï¼šå† ç•ªçµ„ã®ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼åŒ–</h3>
        <p class="history-desc">æ°‘æ”¾åˆå† ç•ªçµ„ã€Golden SixTONESã€ã®ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼æ”¾é€ãŒé–‹å§‹ã€‚å„ãƒ¡ãƒ³ãƒãƒ¼ãŒãƒãƒ©ã‚¨ãƒ†ã‚£ã§ã‚‚æ´»èºã—ä¸€èˆ¬èªçŸ¥åº¦ãŒå‘ä¸Š</p>
      </div>
      <div class="history-item">
        <h3 class="history-year">2026å¹´ï¼šãƒ‡ãƒ“ãƒ¥ãƒ¼6å‘¨å¹´</h3>
        <p class="history-desc">ãƒ‡ãƒ“ãƒ¥ãƒ¼6å‘¨å¹´ã‚’è¨˜å¿µã—ã€SixTONESåˆã®ãƒ™ã‚¹ãƒˆã‚¢ãƒ«ãƒãƒ ã‚’ç™ºå£²ã€‚ã¾ãŸã€å…¨å›½11éƒ½å¸‚å…¨50å…¬æ¼”ã®å¤§è¦æ¨¡ã‚¢ãƒªãƒ¼ãƒŠãƒ„ã‚¢ãƒ¼ã‚’é–‹å‚¬</p>
      </div>
    </section>

    <h2 class="list-header">SixTONES æ­´ä»£ãƒªãƒªãƒ¼ã‚¹ä½œå“ä¸€è¦§</h2>
    <div id="cdList" class="cd-list"></div>
  </div>
</div>

<a href="#top" id="pageTopBtn"><span>â–²</span>TOP</a>

<script>
Chart.register(ChartDataLabels);
const SHEET_DATA_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQxQ9MthYXl_ZlJ3cmbzAqJZHI4e_wACYUhpdqK0aoHuwUlodXL182IXNUt__rALT6JounkCi8PK7mS/pub?gid=0&single=true&output=csv";

const groupDropdown = document.getElementById('groupDropdown');
const dropdownContent = groupDropdown.querySelector('.dropdown-content');
groupDropdown.addEventListener('click', (e) => {
  e.stopPropagation();
  dropdownContent.classList.toggle('is-active');
});
window.addEventListener('click', () => {
  dropdownContent.classList.remove('is-active');
});

const MANUAL_EVENTS = [
  { date: "2023.04.15", label: "åˆã®2å¤§ãƒ‰ãƒ¼ãƒ ãƒ„ã‚¢ãƒ¼" },
  { date: "2024.02.17", label: "åˆã®4å¤§ãƒ‰ãƒ¼ãƒ ãƒ„ã‚¢ãƒ¼" },
  { date: "2025.04.06", label: "å† ç•ªçµ„ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼åŒ–" },
  { date: "2026.01.22", label: "ç¯€ç›®ã¨ãªã‚‹6å‘¨å¹´" }
];

const EVENT_COLOR = "#66b37f"; 

let allData = [], chart = null;

function parseCSV(text) {
  const result = []; const lines = text.split(/\r?\n/).filter(l => l.trim());
  if (lines.length < 2) return [];
  const headers = lines[0].split(',').map(h => h.trim());
  for (let i = 1; i < lines.length; i++) {
    const row = []; let current = ''; let inQuotes = false; const line = lines[i];
    for (let j = 0; j < line.length; j++) {
      const char = line[j]; if (char === '"') inQuotes = !inQuotes;
      else if (char === ',' && !inQuotes) { row.push(current); current = ''; } else { current += char; }
    }
    row.push(current); const obj = {};
    headers.forEach((h, idx) => { let val = row[idx] ? row[idx].trim() : ""; if (val.startsWith('"') && val.endsWith('"')) val = val.substring(1, val.length - 1); obj[h] = val; });
    result.push(obj);
  }
  return result;
}

async function loadData() {
  try {
    const res = await fetch(SHEET_DATA_URL);
    const raw = parseCSV(await res.text());
    allData = raw.map(d => ({ 
      releaseDate: d.releaseDate, group: d.group, title: d.title, category: d.category, 
      firstDay: isNaN(parseInt(d.firstDay)) ? null : parseInt(d.firstDay),
      firstWeek: isNaN(parseInt(d.firstWeek)) ? null : parseInt(d.firstWeek),
      seller: d.seller || "#", affiliate: d.affiliate || "", 
      comment: d.comment || "" 
    })).filter(c => c.group === "SixTONES");
    
    document.getElementById('loading').style.display = 'none';
    document.getElementById('mainContent').style.display = 'block';
    render(false, true);
  } catch (e) { console.error(e); }
}

function scrollToEnd() {
  const wrapper = document.getElementById('chartWrapper');
  setTimeout(() => { wrapper.scrollLeft = wrapper.scrollWidth; }, 150);
}

function render(shouldAnimate = false, shouldScroll = false) {
  const type = document.getElementById("salesType").value;
  const f = document.getElementById("filter").value;
  const s = document.getElementById("sortOrder").value;
  const showEvents = document.getElementById("showEvents").checked;
  const today = new Date();
  today.setHours(0,0,0,0);
  
  let chartSource = allData.filter(c => (f === "all" || c.category === f) && c[type] !== null)
                           .sort((a,b) => s === "date" ? a.releaseDate.localeCompare(b.releaseDate) : (b[type] || 0) - (a[type] || 0));
  
  let listSource = allData.filter(c => (f === "all" || c.category === f) && c.title !== "")
                          .sort((a,b) => b.releaseDate.localeCompare(a.releaseDate));
  
  const chartBody = document.getElementById("chartBody");
  const isMobile = window.innerWidth <= 768;
  chartBody.style.width = isMobile ? `${chartSource.length * 45}px` : "100%";

  const annotations = {};
  if(s === "date" && showEvents) {
    MANUAL_EVENTS.forEach((ev, i) => {
      const evTime = new Date(ev.date.replace(/\./g, '/')).getTime();
      let exactIdx = -1;
      for (let j = 0; j < chartSource.length - 1; j++) {
        const d1 = new Date(chartSource[j].releaseDate.replace(/\./g, '/')).getTime();
        const d2 = new Date(chartSource[j+1].releaseDate.replace(/\./g, '/')).getTime();
        if (evTime >= d1 && evTime <= d2) { exactIdx = j + (evTime - d1) / (d2 - d1); break; }
      }
      if (exactIdx !== -1) {
        const h = -35; 
        annotations['line' + i] = { 
          type: 'line', xMin: exactIdx, xMax: exactIdx, borderColor: EVENT_COLOR, borderWidth: 1, borderDash: [2, 2], 
          label: { display: true, content: ev.label, backgroundColor: EVENT_COLOR, color: '#fff', font: { size: 8.5, weight: 'bold' }, position: 'end', yAdjust: h, padding: 3, borderRadius: 3 } 
        };
      }
    });
  }

  if (chart) chart.destroy();
  chart = new Chart(document.getElementById("salesChart"), {
    type: 'line',
    data: {
      labels: chartSource.map(c => c.title.substring(0, 8) + (c.title.length > 8 ? ".." : "")),
      datasets: [{
        data: chartSource.map(c => c[type]),
        borderColor: '#545454', backgroundColor: '#54545422',
        borderWidth: 2, fill: true, tension: 0.3, pointBackgroundColor: "#fff",
        pointBorderColor: '#545454', pointRadius: 3.5
      }]
    },
    options: {
      animation: shouldAnimate ? { duration: 800 } : false,
      responsive: true, maintainAspectRatio: false, clip: false,
      layout: { padding: { top: 90 } }, 
      plugins: {
        legend: { display: false },
        datalabels: {
          anchor: 'end', align: 'top', offset: 4,
          formatter: (v, ctx) => {
            const label = (v / 10000).toFixed(1) + "ä¸‡";
            return v >= 1000000 ? 'ğŸ‘‘' + label : label;
          },
          color: (ctx) => ctx.dataset.data[ctx.dataIndex] >= 1000000 ? '#f59e0b' : '#64748b', 
          font: { size: 8.5, weight: 'bold' }
        },
        annotation: { annotations: annotations }
      },
      scales: {
        y: { ticks: { callback: v => (v/10000) + "ä¸‡", font: {size: 8.5} }, grace: '20%', grid: { color: '#f1f5f9' } },
        x: { grid: { display: false }, ticks: { font: {size: 9, weight: '700'}, maxRotation: 45, minRotation: 45, autoSkip: !isMobile } }
      }
    }
  });

  if (shouldScroll) scrollToEnd();

  document.getElementById("cdList").innerHTML = listSource.map((c) => {
    const relDate = new Date(c.releaseDate.replace(/\./g, '/'));
    relDate.setHours(0,0,0,0);
    const days = Math.ceil((relDate - today) / 86400000);
    
    let salesText = "";
    if (c[type]) {
      salesText = `<span>${(c[type]/10000).toFixed(1)}ä¸‡æš</span>`;
    } else {
      salesText = `<span>${days > 0 ? "äºˆç´„å—ä»˜ä¸­" : "é›†è¨ˆä¸­"}</span>`;
    }

    return `
    <div class="cd-container ${days > 0 ? 'upcoming' : ''}">
      <a href="${c.seller}" class="cd-item-link" target="_blank" rel="noopener noreferrer">
        <div class="cd-item-base">
          <div class="cd-thumb">${c.affiliate ? `<img src="${c.affiliate}">` : ''}</div>
          <div>
            <div class="cd-title">${c.title}</div>
            <div style="font-size:10px; color:var(--sub); font-weight:700;">
              ${c.releaseDate} | ${c.category.toUpperCase()}
            </div>
          </div>
          <div class="sales-val" style="${days > 0 ? 'color:var(--accent-upcoming);' : ''}">
            ${salesText}
            ${days > 0 ? `<span class="countdown">ã‚ã¨${days}æ—¥</span>` : days === 0 ? `<span class="countdown" style="background:#f97316;color:#fff;border:none;">æœ¬æ—¥ç™ºå£²</span>` : ""}
            ${c.firstWeek >= 1000000 ? '<span class="badge-million">MILLION</span>' : ''}
          </div>
        </div>
        ${c.comment ? `<div class="admin-comment" style="border-top: 1px solid #f1f5f9;">${c.comment}</div>` : ''}
      </a>
    </div>`;
  }).join("");
}

window.addEventListener('scroll', () => {
  const btn = document.getElementById('pageTopBtn');
  if (window.pageYOffset > 300) btn.classList.add('show');
  else btn.classList.remove('show');
});

window.addEventListener('resize', () => { render(false, false); });
[document.getElementById("salesType"), document.getElementById("filter"), document.getElementById("sortOrder"), document.getElementById("showEvents")].forEach(el => 
  el.addEventListener("change", () => render(true, true))
);

loadData();
</script>
</body>
</html>